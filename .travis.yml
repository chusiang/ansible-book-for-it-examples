language: bash
sudo: required
services:
  - docker

before_install:
  - docker version

  - echo "==> Get docker images ..."
  - docker run --rm -it chusiang/ansible:2.4 ansible --version

  - echo "==> List files ..."
  - docker run --rm -it -v $PWD:/srv chusiang/ansible:2.4 /bin/sh -c "ls /srv"

script:
  - echo "==> Run Test case on Ansible 2.4 ..."

  # ch02
  - echo "==> [ch02] Check syntax ..."
  - docker run --rm -it -v $PWD:/srv chusiang/ansible:2.4 /bin/sh -c "cd ch02 && ansible-playbook --syntax-check *.yml"
  - echo "==> [ch02] Run ..."
  - docker run --rm -it -v $PWD:/srv chusiang/ansible:2.4 /bin/sh -c "cd ch02 && ansible-playbook *.yml"
